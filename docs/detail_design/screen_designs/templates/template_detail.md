# テンプレート詳細画面

## 画面概要
テンプレートの詳細情報、メッセージ戦略、実行設定、KPI設定を表示・管理する画面。

## 画面レイアウト

### ヘッダー部分
```
+--------------------------------------------------+
|                                                  |
| テンプレート名                                    |
| [カテゴリーバッジ] • 作成日: 2024/01/01 • 更新日: 2024/01/02
|                                                  |
| [編集] [複製] [テスト実行] [⋮]                    |
|                                                  |
+--------------------------------------------------+
```

### タブナビゲーション
```
+--------------------------------------------------+
| [基本情報] [メッセージ戦略] [実行設定] [KPI設定]    |
+--------------------------------------------------+
```

### 基本情報タブ
```
+--------------------------------------------------+
| 基本情報                                         |
| +----------------------------------------------+ |
| | テンプレート名: {name}                        | |
| | カテゴリー: {category}                        | |
| | 説明: {description}                           | |
| | ターゲット業界: {target_industry}             | |
| +----------------------------------------------+ |
|                                                  |
| タグ                                            |
| +----------------------------------------------+ |
| | [タグ1] [タグ2] [タグ3]                       | |
| +----------------------------------------------+ |
|                                                  |
| メタ情報                                         |
| +----------------------------------------------+ |
| | 作成日時: {created_at}                        | |
| | 更新日時: {updated_at}                        | |
| | 作成者: {creator}                             | |
| | 最終更新者: {last_updater}                    | |
| +----------------------------------------------+ |
+--------------------------------------------------+
```

### メッセージ戦略タブ
```
+--------------------------------------------------+
| メッセージ戦略                                    |
| +----------------------------------------------+ |
| | モード: {mode}                               | |
| | 戦略: {strategy}                             | |
| | トーン: {toneOfVoice}                        | |
| | 最大文字数: {maxLength}文字                   | |
| | 絵文字: {useEmoji ? '使用する' : '使用しない'} | |
| |                                              | |
| | [手動選択の場合のみ表示]                      | |
| | コンテンツフォーカス: {contentFocus}          | |
| | カスタム指示: {customInstructions}            | |
| +----------------------------------------------+ |
+--------------------------------------------------+
```

### 実行設定タブ
```
+--------------------------------------------------+
| 実行設定                                         |
| +----------------------------------------------+ |
| | 実行優先度: [バッジ]                          | |
| | {speed: '速度優先',                          | |
| |  balanced: 'バランス',                       | |
| |  quality: '品質優先'}                        | |
| +----------------------------------------------+ |
|                                                  |
| | 送信方法の優先度: [バッジ]                     | |
| | {form: 'フォーム優先',                        | |
| |  dm: 'DM優先'}                               | |
| |                                              | |
| | 説明:                                        | |
| | フォーム優先: フォーム送信を優先的に試み、      | |
| | 失敗した場合はDMでの送信にフォールバック        | |
| |                                              | |
| | DM優先: DMでの送信を優先的に試み、            | |
| | 失敗した場合はフォーム送信にフォールバック      | |
| +----------------------------------------------+ |
|                                                  |
| 実行履歴                                         |
| +----------------------------------------------+ |
| | 実行履歴は現在実装中です                      | |
| +----------------------------------------------+ |
+--------------------------------------------------+
```

### KPI設定タブ
```
+--------------------------------------------------+
| KPI設定                                          |
| +----------------------------------------------+ |
| | 評価期間: {evaluationPeriod}日               | |
| +----------------------------------------------+ |
|                                                  |
| システムKPI                                      |
| +----------------------------------------------+ |
| | メトリクス名    | 目標値 | 重み付け | 単位    |
| |---------------|--------|----------|----------|
| | 開封率        | 30     | 1.0     | %        |
| | 開封数        | 300    | 1.0     | 回       |
| | クリック率    | 15     | 1.0     | %        |
| | クリック数    | 100    | 1.0     | 回       |
| +----------------------------------------------+ |
|                                                  |
| カスタムKPI                                      |
| +----------------------------------------------+ |
| | メトリクス名 | 目標値 | 重み付け | 単位        |
| |-------------|--------|----------|------------|
| | {name}      | {target}| {weight}| {unit}    |
| +----------------------------------------------+ |
+--------------------------------------------------+
```

## データモデル

### テンプレート詳細
```typescript
interface Template {
  id: string;
  name: string;
  category: string;
  template_settings: string;  // JSON文字列
  created_at: string;
  updated_at: string;
  user_id: string;
  recommended?: boolean;
  success_rate?: number;
  average_time?: number;
  usage_count?: number;
  average_response_rate?: number;
  is_public?: boolean;
}

interface TemplateSettings {
  basicInfo: {
    description?: string;
    tags?: string[];
    target_industry?: string;
  };
  strategy: {
    mode: 'ai_auto' | 'manual';
    strategy: Strategy;
    toneOfVoice: ToneOfVoice;
    maxLength: 300 | 400 | 500 | 600 | 800;
    useEmoji: boolean;
    contentFocus?: ContentFocus;
    customInstructions?: string;
    messageTemplate?: string;
  };
  execution: {
    execution_priority: ExecutionPriority;
    parallel_tasks?: number;
    retry_attempts?: number;
    preferred_method?: PreferredMethod;
  };
  kpi: {
    metrics: TemplateMetric[];
    evaluationPeriod: number;
  };
}
```

## アクション

### ヘッダーアクション
- 編集: テンプレート編集画面へ遷移
- 複製: テンプレートを複製
- テスト実行: テスト実行画面へ遷移
- その他（⋮）:
  - アーカイブ
  - 削除

## レスポンシブ対応

### デスクトップ
- 最大幅: max-w-3xl
- スクロール可能な領域: h-[calc(100vh-12rem)]
- スティッキーヘッダー
- タブナビゲーション固定

### タブレット/モバイル
- フルスクリーン表示
- タッチ操作最適化
- スクロール時のヘッダー固定

## エラーハンドリング

### データ読み込みエラー
- ローディング表示
- エラーメッセージ表示
- コンテンツのパースエラー処理

### アクションエラー
- 編集・複製・削除時のエラー処理
- エラーメッセージのトースト表示 