# バッチジョブ詳細 - レター作成・送信タブ

## 画面概要
バッチジョブのレター作成と送信管理（Do）を一元的に表示・管理する画面。コンテンツ生成から送信までの進捗を統合的に管理できる。

## 画面レイアウト
```
+--------------------------------------------------+
|                    ヘッダー                        |
| < 一覧に戻る                                      |
| バッチジョブ詳細: [ジョブ名]                       |
+--------------------------------------------------+
|                                                  |
| [前提条件] [レター作成・送信] [実績分析] [改善提案] |
|                                                  |
+--------------------------------------------------+
|                                                  |
| [レター生成] [送信管理]                           |
+--------------------------------------------------+
|                                                  |
| // レター生成タブ                                 |
| +------------------------------------------------+
| | レター生成の進捗状況                            |
| | 完了: 120/150                                  |
| | [================>      ] 80%                  |
| |                                                |
| | 全体の進捗                                     |
| | 生成中      レビュー待ち   承認済み     要修正   |
| | [30件]     [10件]       [70件]      [10件]   |
| | 25%        8.3%        58.3%       8.3%      |
| |                                                |
| | 品質スコアの分布                               |
| | 高品質(90%以上)  中品質(70-89%) 要改善(70%未満)|
| | [80件]          [30件]         [10件]        |
| |                                                |
| | タスク一覧                                     |
| | [フィルター ▼] [ソート ▼] [一括操作 ▼]         |
| |                                                |
| | 企業名 | 状態 | 品質スコア | 更新日時 | アクション |
| |-------------------------------------------|
| | A社    | 完了 | 95%      | 01/10   | [詳細] |
| | B社    | 生成中| -        | 01/10   | [詳細] |
| |                                                |
| | [送信を実行する] [送信をスケジュール]            |
| +------------------------------------------------+
|                                                  |
| // 送信管理タブ                                  |
| +------------------------------------------------+
| | 送信進捗状況                                   |
| | 予測完了まで: 30分                             |
| | 75/100 完了                      75.0%        |
| | [===================>      ]                   |
| |                                                |
| | 主要指標                                       |
| | 成功率: 81.0%   エラー率: 3.4%   平均時間: 2.5秒|
| |                                                |
| | 送信管理                                       |
| | [フィルター ▼] [時間順 ▼]                      |
| |                                                |
| | ✈ テクノロジー株式会社                 送信中   |
| | 予定: 2024/12/26 20:34:03                    |
| |                                                |
| | ⏱ イノベーション株式会社               待機中   |
| | 予定: 2024/12/26 20:34:03                    |
| +------------------------------------------------+
+--------------------------------------------------+
```

## インタラクティブ要素

### 1. タブナビゲーション
- **メインタブ**
  - 前提条件
  - レター作成・送信（現在のタブ）
  - 実績分析
  - 改善提案

- **サブタブ**
  - レター生成
  - 送信管理

### 2. レター生成タブの機能
- **進捗状況セクション**
  - 全体の進捗バー
  - 完了数/全体数
  - パーセンテージ表示

- **ステータス別カウンター**
  - 生成中
  - レビュー待ち
  - 承認済み
  - 要修正

- **品質スコア分布**
  - 高品質（90%以上）
  - 中品質（70-89%）
  - 要改善（70%未満）

- **タスク一覧**
  - フィルター機能
  - ソート機能
  - 一括操作
  - 詳細表示

- **送信アクション**
  - 送信実行ボタン
    - クリック時に確認ダイアログを表示
    - ダイアログ内容：
      ```
      送信の確認
      ----------------------------------------
      全体: 150件
      未レビュー: 10件
      送信対象: 140件
      ----------------------------------------
      上記の内容で送信を実行しますか？
      
      [キャンセル] [送信する]
      ```
  - 送信スケジュール設定
    - クリック時にスケジュール設定ダイアログを表示
    - ダイアログ内容：
      ```
      送信スケジュールの設定
      ----------------------------------------
      送信開始日時:
      [2024-12-26] [20:00]
      
      送信対象:
      全体: 150件
      未レビュー: 10件
      送信対象: 140件
      
      予想完了時刻: 2024-12-26 23:30
      
      ※未レビューの案件は送信されません
      ----------------------------------------
      [キャンセル] [スケジュールを設定]
      ```
    - 送信日時の指定
      - 日付選択（カレンダーピッカー）
      - 時刻選択（24時間形式）
    - バリデーション
      - 過去の日時は選択不可

### 3. 送信管理タブの機能
- **進捗状況セクション**
  - 予測完了時間
  - 処理速度
  - 進捗バー

- **主要指標パネル**
  - 成功率
  - エラー率
  - 平均処理時間

- **送信管理リスト**
  - フィルター機能
  - ソート機能
  - ステータス表示
  - 予定時刻表示

## 状態表示

### レター生成状態
- **生成中**: 青色の進行中アイコン
- **レビュー待ち**: 黄色の時計アイコン
- **承認済み**: 緑色のチェックアイコン
- **要修正**: 赤色の警告アイコン

### 送信状態
- **送信中**: 青色のアニメーションアイコン
- **待機中**: 灰色の時計アイコン
- **完了**: 緑色のチェックアイコン
- **エラー**: 赤色の警告アイコン

## リアルタイム更新
- WebSocketによる状態更新
- 自動再接続機能
- データの整合性チェック
- 更新頻度の最適化

## エラーハンドリング
- 生成/送信エラーの自動検出
- リトライ戦略の実装
- エラー通知の設定
- 手動介入オプション

## レスポンシブ対応
- デスクトップ:
  - フル機能表示
  - マルチカラムレイアウト

- タブレット:
  - 縮小されたグラフ表示
  - スクロール可能なリスト

- モバイル:
  - 重要情報の優先表示
  - タッチ操作の最適化
  - 簡略化されたビュー 