# バッチジョブ詳細 - 前提条件タブ

## 画面概要
バッチジョブ作成時に設定した前提条件（Plan）の参照・編集画面。作成時の設定内容を確認でき、一部の項目を編集することができます。

## 画面レイアウト
```
+--------------------------------------------------+
|                    ヘッダー                        |
| < 一覧に戻る                                      |
| バッチジョブ詳細: [ジョブ名]                       |
+--------------------------------------------------+
|                                                  |
| [前提条件] [レター作成・送信] [実績分析] [改善提案] |
|                                                  |
+--------------------------------------------------+
|                                                  |
|  基本情報                                        |
| +------------------------------------------------+
| | 名称: 2024年Q1製品紹介キャンペーン              |
| | カテゴリ: 新規開拓                             |
| | 説明: 新製品のご紹介と事例のご案内              |
| |                                                |
| | [編集]                                         |
| +------------------------------------------------+
|                                                  |
|  テンプレート情報                                |
| +------------------------------------------------+
| | テンプレート: 製品紹介_基本 (TEMP-001)          |
| | 説明: 製品の特徴と導入効果を簡潔に伝えるテンプレート|
| |                                                |
| | メッセージ戦略:                                |
| | {テンプレートのmessageStrategy内容}            |
| |                                                |
| | 実行設定:                                      |
| | {テンプレートのexecutionSettings内容}          |
| |                                                |
| | KPI設定:                                      |
| | {テンプレートのkpiSettings内容}                |
| |                                                |
| | [編集]                                         |
| +------------------------------------------------+
|                                                  |
|  プロダクト情報                                  |
| +------------------------------------------------+
| | 製品名: SalesTailor Pro                        |
| |                                                |
| | 説明:                                          |
| | {description}                                  |
| |                                                |
| | USP:                                           |
| | {usp}                                         |
| |                                                |
| | 価格帯:                                        |
| | {priceRange}                                  |
| |                                                |
| | 想定課題:                                      |
| | {challenges}                                  |
| |                                                |
| | メリット:                                      |
| | {benefits配列の内容}                           |
| |                                                |
| | ソリューション:                                |
| | {solutions配列の内容}                          |
| |                                                |
| | 添付ファイル:                                  |
| | - {pdfFile.fileName}                          |
| | - サイズ: {pdfFile.size}                      |
| |                                                |
| | [編集]                                         |
| +------------------------------------------------+
|                                                  |
|  送信先グループ                                  |
| +------------------------------------------------+
| | 送信グループ名: 2024年Q1ターゲット              |
| | 説明: 2024年第1四半期の重点アプローチ企業       |
| |                                                |
| | 選択企業数: 150社                              |
| |                                                |
| | [企業一覧を表示]                               |
| |                                                |
| | [編集]                                         |
| +------------------------------------------------+
|                                                  |
|  実行スケジュール                                |
| +------------------------------------------------+
| | 開始予定: 2024/01/15 10:00                    |
| | 想定完了: 2024/01/20 17:00                    |
| |                                                |
| | [編集]                                         |
| +------------------------------------------------+
+--------------------------------------------------+
```

## 編集ダイアログ

### 基本情報編集
```
+--------------------------------------------------+
|  基本情報の編集                                   |
| ------------------------------------------------ |
|                                                  |
|  名称                                           |
|  [Input]                                        |
|                                                  |
|  カテゴリ                                        |
|  [Select]                                       |
|                                                  |
|  説明                                           |
|  [Textarea]                                     |
|                                                  |
|  [保存] [キャンセル]                             |
+--------------------------------------------------+
```

### プロダクト情報編集
```
+--------------------------------------------------+
|  プロダクト情報の編集                              |
| ------------------------------------------------ |
|                                                  |
|  説明                                           |
|  [Textarea]                                     |
|                                                  |
|  USP                                            |
|  [Textarea]                                     |
|                                                  |
|  価格帯                                         |
|  [Input]                                        |
|                                                  |
|  想定課題                                        |
|  [Textarea]                                     |
|                                                  |
|  メリット                                        |
|  [DynamicList]                                  |
|  + [メリットを追加]                              |
|                                                  |
|  ソリューション                                   |
|  [DynamicList]                                  |
|  + [ソリューションを追加]                         |
|                                                  |
|  添付ファイル                                    |
|  [FileUploader]                                 |
|                                                  |
|  [保存] [キャンセル]                             |
+--------------------------------------------------+
```

### 送信先企業編集
```
+--------------------------------------------------+
|  送信先企業の編集                                 |
| ------------------------------------------------ |
|                                                  |
|  企業検索                                        |
|  [SearchInput]                                  |
|                                                  |
|  選択済み: 75社                                  |
|                                                  |
|  [企業リスト]                                    |
|  □ 株式会社A                                    |
|  ■ 株式会社B                                    |
|  □ 株式会社C                                    |
|                                                  |
|  [一括選択] [選択解除]                           |
|                                                  |
|  [保存] [キャンセル]                             |
+--------------------------------------------------+
```

## コンポーネント構成

### 使用コンポーネント
- `Card`, `CardHeader`, `CardTitle`, `CardContent`
- `Dialog`, `DialogContent`, `DialogHeader`, `DialogTitle`
- `Form`
- `Input`, `Textarea`, `Select`
- `Label`
- `Button`
- `AlertDialog` (変更確認用)

### レイアウト構造
```typescript
<div className="space-y-6">
  <Card>
    <CardHeader>
      <div className="flex justify-between">
        <CardTitle>セクション名</CardTitle>
        <Button onClick={() => setEditMode(true)}>
          編集
        </Button>
      </div>
    </CardHeader>
    <CardContent>
      {/* 表示内容 */}
    </CardContent>
  </Card>

  <Dialog>
    <DialogContent>
      <DialogHeader>
        <DialogTitle>編集</DialogTitle>
      </DialogHeader>
      <Form>
        {/* フォーム要素 */}
      </Form>
    </DialogContent>
  </Dialog>
</div>
```

## インタラクティブ要素

### 編集可能項目
- **基本情報**
  - 名称
  - カテゴリ
  - 説明

- **テンプレート情報**
  - メッセージ戦略
  - 実行設定
  - KPI設定

- **プロダクト情報**
  - 説明
  - USP
  - 価格帯
  - 想定課題
  - メリット（リスト）
  - ソリューション（リスト）
  - 添付ファイル

- **送信先グループ**
  - 企業の選択状態

- **実行スケジュール**
  - 開始予定日時
  - 想定完了日時

### 保存処理
- 変更内容は`batch_job_snapshots`テーブルに保存
- 元の情報は履歴として保持
- 変更前後の差分を記録

### バリデーション
- 必須項目のチェック
- 文字数制限
- 日時の整合性チェック
- 選択企業数の最小数チェック

## エラーハンドリング
- 入力値の検証エラー表示
- 保存失敗時のエラーメッセージ
- 編集競合の検出と警告

## レスポンシブ対応
- デスクトップ: フル表示
- タブレット: スクロール可能なレイアウト
- モバイル: 
  - セクション単位の折りたたみ表示
  - モイアログはフルスクリーン表示 