##要件定義

このドキュメントは、提供されたファイル群からリバースエンジニアリングによって推測された、AIセールスアシスタントアプリケーションの要件定義を記述したものです。

### 全般

*   **名称:** Sales Tailor
*   **目的:** AIを活用して営業活動を効率化する。具体的には、見込み顧客のリスト作成、パーソナライズされた営業メッセージの生成、送信、効果測定を自動化し、営業担当者の業務効率を向上させる。
*   **主な機能:**
    *   **ユーザー認証と認可:** ログイン、新規登録、パスワードリセット機能、ソーシャルログイン。
    *   **企業情報管理:** 企業リストの作成、編集、削除、インポート・エクスポート。
    *   **テンプレート管理:** 営業メッセージのテンプレート作成、編集、テスト、分析。
    *   **バッチジョブ管理:** 複数の企業へのメッセージ送信を自動化するジョブの作成、スケジュール、監視、分析。
    *   **コンテンツ生成:** AIによるメッセージ生成、コンテンツの自動入力。
    *   **送信管理:** メール、DM、フォーム送信の自動化。
    *   **効果測定:** メッセージの応答率、商談化率などのKPIをトラッキング。
    *   **最適化:** AIによるメッセージの改善提案。
    *   **通知機能:** ユーザーへの通知。

### 主要な機能要件

#### 1. ユーザー管理

*   **認証:**
    *   メールアドレスとパスワードによる認証。
    *   GoogleまたはGitHubアカウントを使用したソーシャルログイン。
    *   パスワードのリセット機能。
    *   ログインセッションの維持。
*   **認可:**
    *   一般ユーザーと管理者ロールを区別。
    *   管理者のみがアクセスできる機能（テンプレート管理など）を制御。
*   **プロフィール管理:**
    *   ユーザー名、会社名、役職、メールアドレス、電話番号、住所などの個人情報の登録、編集。
    *   アバター画像の登録と管理。

#### 2. 企業情報管理

*   **企業リスト:**
    *   企業名、URL、業界、連絡先メールアドレス、連絡フォームURL、メモなどの情報を保存。
    *   企業情報を検索（キーワード、業種、地域などで絞り込み）。
    *   CSVファイルによる一括インポート、エクスポート。
    *   企業の重複登録を防止。
    *   企業情報をグループ化する機能。
    *   除外する企業を登録・管理する機能。

#### 3. テンプレート管理

*   **テンプレート作成:**
    *   AI生成モードまたは手動編集モードを選択可能。
    *   プロンプト戦略（利点重視、課題解決型など）を設定。
    *   メッセージトーン（フォーマル、ビジネスライクなど）を設定。
    *   メッセージの最大文字数を指定。
    *   絵文字の使用有無を設定。
    *   テンプレートのタグ付け機能。
    *   システム/カスタムKPI設定。
    *   評価期間を設定。
    *   並列タスク数やリトライ回数の設定。
*   **テンプレート編集:**
    *   既存のテンプレートの編集機能。
    *   テキストエディターでテンプレートを直接編集。
    *   変数を挿入する機能（企業名、製品名など）。
    *   テンプレートのプレビュー機能。
*   **テンプレートテスト:**
    *   A/Bテスト機能で複数のテンプレートを比較。
    *   テンプレートのパフォーマンスを測定。
    *   AIによるテンプレート改善提案機能。

#### 4. バッチジョブ管理

*   **ジョブ作成:**
    *   ターゲット企業リストを選択（複数選択可能）。
    *   送信テンプレートを選択。
    *   送信スケジュールを設定（即時実行、日時指定）。
    *   送信方法（フォーム送信、DM送信）を選択。
    *   並列タスク数やリトライ回数の設定。
*   **ジョブ監視:**
    *   バッチジョブのステータス（実行中、一時停止、完了、エラー）を表示。
    *   ジョブの進捗状況を可視化（進捗率、完了タスク数、エラー数）。
    *   リアルタイムのメトリクス表示（応答率、コンバージョン率、平均処理時間）。
    *   送信キューの管理機能。
*   **ログ管理:**
    *   タスクごとの詳細ログを記録。
    *   ログレベル（情報、警告、エラー）を設定可能。
    *   ログのフィルタリング、ソート機能。
    *   エラーログの確認と管理。
*   **ジョブの管理:**
    *   ジョブの開始、一時停止、停止、削除などの操作が可能。
    *   完了したジョブの結果の確認。
    *   ジョブの再試行機能。
    *   ジョブの履歴を管理。

#### 5. コンテンツ生成

*   **コンテンツ生成:**
    *   AIモデルを使用してテキストコンテンツを生成。
    *   プロンプトによる生成制御。
    *   生成されたコンテンツの編集機能。
    *   テンプレートと企業情報に基づいたパーソナライズされたコンテンツ生成。
    *   カスタムプロンプトを設定可能。
    *   指定された形式（JSONなど）で出力。

#### 6. 送信管理

*   **送信方法:**
    *   Webフォームへの自動入力と送信。
    *   ダイレクトメッセージ（DM）の送信。
    *   メール送信（オプション）。
*   **送信処理:**
    *   複数の企業へのメッセージ送信を自動化。
    *   送信スケジュールの設定。
    *   送信エラー時の自動リトライ機能。
    *   送信結果を記録（成功/失敗、送信日時）。
    *   送信状況の監視とログ管理。

#### 7. 効果測定

*   **KPI:**
    *   応答率、商談化率、成約率、ROIなどの主要KPIをトラッキング。
    *   KPIの目標値を設定。
    *   過去のデータとの比較表示（トレンド表示）。
*   **分析:**
    *   テンプレート別のパフォーマンス分析。
    *   業界別のパフォーマンス比較。
    *   AIによるインサイトと最適化提案。
    *   A/Bテストの結果分析。
    *   エラー分析と改善点の特定。

#### 8. 通知機能

*   **通知の種類:**
    *   ジョブの開始、完了、失敗、エラー発生などのイベント通知。
    *   重要度の高いアラート通知。
    *   システムからの通知。
*   **通知方法:**
    *   メール通知。
    *   ブラウザ通知。
    *   アプリ内通知（TODO）。

### 技術的要件

*   **API:** REST API
*   **データベース:** Supabase (PostgreSQL)
*   **認証:** Supabase Auth, NextAuth
*   **フロントエンド:** Next.js, React, Tailwind CSS
*   **バックエンド:** Deno (Supabase Functions), OpenAI API, その他外部API
*   **AIモデル:** OpenAI (GPT-4), Anthropic (Claude)

### 非機能要件

*   **セキュリティ:** 認証・認可に基づいたアクセス制御。APIキーの保護。
*   **パフォーマンス:** 高速なレスポンスタイム。
*   **可用性:** システムの安定稼働。
*   **スケーラビリティ:** ユーザー数の増加に対応できる設計。
*   **保守性:** コードの可読性、保守性、テスト容易性。

### 今後の拡張

*   **多言語対応:**
    *   メッセージの多言語翻訳。
    *   UIの多言語化。
*   **AIによるコンテンツの自動生成:**
    *   製品情報を元にしたメッセージの自動生成。
    *   顧客の属性に応じたメッセージの自動最適化。
*   **高度な分析機能:**
    *   詳細な分析レポートの作成。
    *   AIによる売上予測。
*   **連携機能:**
    *   CRM（顧客管理システム）との連携。
    *   SalesforceやHubSpotなどのプラットフォームとの連携。
*   **チャットボット連携:**
    *   問い合わせ対応のチャットボットを組み込む。
    *   AIによる自動応答機能。

このドキュメントは、プロジェクトの進行に応じて変更される可能性があります。
