# テンプレートコンポーネントのリファクタリング

## 概要
テンプレート関連コンポーネントのフォルダ構造を整理し、責務の分離を明確にする。

## 目的
- コンポーネントの役割と責務を明確にする
- 再利用可能なコンポーネントの特定と分離
- メンテナンス性と可読性の向上
- 一貫性のある命名規則の適用

## タスク

### 1. フォルダ構造の再編成
- [x] `pages/`ディレクトリの作成とコンポーネントの移動
  - [x] `TemplateManager.tsx`
  - [x] `TemplateDetails.tsx`
  - [x] `TemplateTestingPanel.tsx`

- [x] `wizard/`ディレクトリの作成とコンポーネントの移動
  - [x] `CreateTemplateWizard.tsx`
  - [x] `CreateTemplateDialog.tsx`
  - [x] `steps/`配下のステップコンポーネント

- [x] `forms/`ディレクトリの作成
  - [x] `settings/`ディレクトリの作成
  - [x] `editor/`ディレクトリの作成

- [x] `shared/`ディレクトリの作成
  - [x] `TemplateSettingsMode.tsx`の移動

### 2. フォームコンポーネントの分離
- [x] `KPISettingsForm.tsx`の新規作成
  - [x] KPISettingsStepからフォームロジックを分離
  - [x] メトリクス管理機能の移行
  - [x] バリデーションロジックの移行

- [x] 既存フォームコンポーネントの移動
  - [x] `BasicSettingsForm.tsx` → `forms/settings/`
  - [x] `CustomSettingsForm.tsx` → `forms/settings/`
  - [x] `ExecutionSettingsForm.tsx` → `forms/settings/`
  - [x] `MessageTemplateEditor.tsx` → `forms/editor/`

### 3. インポートパスの更新
- [x] 全コンポーネントのインポートパスを新しい構造に合わせて更新
  - [x] `CreateTemplateWizard.tsx`のインポートパス更新
  - [x] `KPISettingsStep.tsx`のインポートパス更新
  - [x] その他のコンポーネントのインポートパス更新
- [x] 相対パスを`@/components/templates/...`形式に統一

### 4. コンポーネントのリファクタリング
- [x] ステップコンポーネントの責務を明確化
  - [x] ナビゲーション制御
  - [x] フォームの表示制御
  - [x] データの保存処理

- [x] フォームコンポーネントの責務を明確化
  - [x] フォームのUI実装
  - [x] バリデーション
  - [x] 状態管理

### 5. テストとドキュメント
- [ ] 移動したコンポーネントのテストの更新
- [x] 新しいフォルダ���造のドキュメント作成
  - [x] フォルダ構造の説明
  - [x] コンポーネントの責務の説明
  - [x] 命名規則の説明
  - [x] 開発ガイドラインの作成
- [x] コンポーネント間の依存関係図の作成
  - [x] コンポーネント階層図
  - [x] コンポーネントグループ図
  - [x] データフロー図
  - [x] 依存関係の注意点

## 進捗状況
- 2024-01-04:
  - フォルダ構造の再編成を完了
  - 既存コンポーネントの移動を完了
  - KPISettingsFormの作成と分離を完了
  - コンポーネントの責務分離を完了
  - インポートパスの更新を完了
  - フォルダ構造のドキュメントを作成
  - 依存関係図を作成
  - 次のステップ: テストの更新

## 注意事項
- 既存の機能を維持すること
- 一度に大きな変更を避け、段階的に実施すること
- 各ステップでテストを実行し、動作確認を行うこと

## 期待される効果
- コードの可読性向上
- メンテナンス性の向上
- コンポーネントの再利用性向上
- 開発効率の向上