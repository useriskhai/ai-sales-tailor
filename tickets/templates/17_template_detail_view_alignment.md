# テンプレート詳細画面の表示項目統一化

## 概要
テンプレート詳細画面の表示項目を、テンプレート作成時の項目構造に合わせて再構築する。
これにより、一貫性のある表示とユーザー体験を提供する。

## 実装詳細

### 1. 表示項目の構造
#### 基本情報（BasicInfo）
- テンプレート名（name）
- カテゴリー（category）

#### メッセージ戦略（MessageStrategy）
- モード（mode: 'ai_auto' | 'manual'）
- 戦略（strategy: Strategy）
- トーン（toneOfVoice: ToneOfVoice）
- 最大長（maxLength: number）
- 絵文字使用（useEmoji: boolean）

#### 実行設定（ExecutionSettings）
- 実行優先度（execution_priority: 'speed' | 'balanced' | 'quality'）

#### KPI設定（KPISettings）
- メトリクス（metrics）
  - ID（id）
  - 名前（name）
  - タイプ（type: 'system' | 'custom'）
  - 単位（unit）
  - 目標値（target）
  - 重み（weight）
- 評価期間（evaluationPeriod）

### 2. 修正対象ファイル
- `src/pages/templates/[id]/index.tsx`
- 関連するコンポーネントファイル

### 3. UI/UX改善点
- 各セクションを明確に区分
- 情報の階層構造を視覚的に表現
- 必須項目と任意項目の区別を明確化
- データの読み込み状態の適切な表示

### 4. 実装手順
1. 型定義の確認と更新
   - `Template`インターフェースの確認
   - 必要に応じて型の追加・修正

2. コンポーネントの構造化
   - 各セクションを個別のコンポーネントに分割
   - Props型の定義
   - エラーハンドリングの実装

3. データ取得ロジックの修正
   - `useTemplate` hookの更新
   - データ変換ロジックの実装

4. UI実装
   - 各セクションのレイアウト実装
   - レスポンシブデザインの適用
   - ローディング状態の実装
   - エラー表示の実装

## 進捗状況（2024/01/07）

### 1. データ取得の問題
- Edge Functionからのレスポンス形式と、フロントエンドの期待する形式の不一致を修正
  ```typescript
  // 修正前のレスポンス形式
  {
    data: Template[],
    count: number
  }
  // 修正後のレスポンス形式
  Template[]
  ```

### 2. 実装済みの項目
- `useTemplates`フックの修正
  - Edge Functionのレスポンスから正しくテンプレート配列を取り出すように修正
  - レスポンス形式のバリデーション追加

### 3. 残課題
1. データ構造の統一
   - バックエンドとフロントエンドでのデータ構造の差異解消
   - 型定義の更新

2. UI/UX改善
   - ローディング状態の表示
   - エラー時のフォールバックUI
   - 編集・削除機能の実装

## テスト項目
- [ ] 全ての項目が正しく表示されることの確認
- [ ] データがない場合の表示確認
- [ ] レスポンシブ対応の確認
- [ ] ローディング状態の確認
- [ ] エラー表示の確認

## 注意事項
- 既存のデータ構造との互換性維持
- パフォーマンスへの影響考慮
- アクセシビリティへの配慮

## 受け入れ基準
1. テンプレート作成時の項目構造と完全に一致している
2. 全ての項目が正しく表示される
3. レスポンシブデザインが適切に機能する
4. ローディング状態とエラー状態が適切に表示される 